# ТЕСТОВОЕ ЗАДАНИЕ на позицию

# Junior Backend разработчик

## Задача

Реализовать веб-сервис на базе django, предоставляющий REST-api и способный:

1. Принимать из POST-запроса .csv файлы для дальнейшей обработки;

1. Обрабатывать типовые deals.csv файлы, содержащие истории сделок;

1. Сохранять извлеченные из файла данные в БД проекта;

1. Возвращать обработанные данные в ответе на GET-запрос.

## Требования

1. Данные хранятся в реляционной БД, взаимодействие с ней осуществляется посредством django ORM.

1. Ранее загруженные версии файла deals.csv не должны влиять на результат обработки новых.

1. Эндпоинты соответствуют спецификации:

**Выдача обработанных данных**

Метод: GET

В ответе содержится поле &quot;response&quot; со списком из 5 клиентов, потративших наибольшую сумму за весь период.

Каждый клиент описывается следующими полями:

    - username - логин клиента;
    - spent\_money - сумма потраченных средств за весь период;
    - gems - список из названий камней, которые купили как минимум двое из списка &quot;5 клиентов, потративших наибольшую сумму за весь период&quot;, и данный клиент является одним из этих покупателей.

**Загрузка файла для обработки**

Метод: POST

Аргументы:

- deals: файл, содержащий историю сделок.

Ответ:

- Status: OK - файл был обработан без ошибок;
- Status: Error, Desc: \&lt;Описание ошибки\&gt; - в процессе обработки файла произошла ошибка.

1. Приложение должно быть контейнирезировано при помощи docker;

1. Проект не использует глобальных зависимостей за исключением: python, docker, docker-compose;

1. Readme проекта описывает весь процесс установки, запуска и работы с сервисом;

1. Требования к фронтенду не предъявляются, интерфейс взаимодействия — RestFull API;

1. Проект запускается одной командой.

## Будет плюсом

1. Команда, используемая для запуска проекта - docker-compose up;

1. Кэширование данных, возвращаемых GET-эндпоинтом, с обеспечением достоверности ответов;

1. Сервис django работает на многопоточном WSGI-сервере;

1. API реализован на основе DRF.

## Файлы

**deals.csv** - содержит историю сделок по продаже камней. Описание полей deals.csv:

- customer - логин покупателя
- item - наименование товара
- total - сумма сделки
- quantity - количество товара, шт
- date - дата и время регистрации сделки

Рекомендуемое время выполнения тестового задания: 2-3 дня

## Полезные ссылки

- Документация django – [https://docs.djangoproject.com/en/3.0/](https://docs.djangoproject.com/en/3.0/)
- Документация DRF – [https://www.django-rest-framework.org/](https://www.django-rest-framework.org/)
- Документация docker – [https://docs.docker.com/](https://docs.docker.com/)
- Документация docker-compose – [https://docs.docker.com/compose/](https://docs.docker.com/compose/)
- Немного о качестве кода – [https://realpython.com/python-code-quality/](https://realpython.com/python-code-quality/)
- Python Debugger – [https://docs.python.org/3/library/pdb.html](https://docs.python.org/3/library/pdb.html)
